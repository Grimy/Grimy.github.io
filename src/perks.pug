extends index.pug

block meta
  - title = 'Perky'
  script(src='perks.js')

block content
  form.flexbox(action='javascript:main()')
    .filler
    fieldset.box(style='flex: 2 0 320px')
      legend Inputs
      label(title='Export your Trimps save and paste it here.')
        textarea#save(onfocus='this.value = ""' onpaste='handle_paste(event, read_save, main)')
        | Import save
      label(title='Check this when respeccing from the View Perks screen.')
        input#respec(type='checkbox' onchange='handle_respec(this.checked)')
        | Mid-run respec
      label(title='The base zone used in calculations. Set this to a few zone before your planned portalling zone, for example the zone on which you do your Void Maps.')
        input#zone(type='text' required pattern='\\d{2,3}' onchange='if (game) update_dg()' data-saved='')
        | Target zone
      label(title='Suggested weights for various situations.')
        select#preset(onchange='select_preset(this.value)' data-saved)
          option(disabled)
            | — Normal progression —
          option(value='early')
            | z1–59
          option(value='broken')
            | z60–99
          option(value='mid')
            | z100–180
          option(value='corruption')
            | z181–229
          option(value='magma')
            | z230–280
          option(value='z280')
            | z280–400
          option(value='z400')
            | z400–450
          option(value='z450')
            | z450+
          option(disabled)
            | — Special-purpose presets —
          option(value='spire')
            | Spire respec
          option(value='nerfed')
            | Nerfed feat
          option(value='tent')
            | Tent City feat
          option(value='scientist')
            | Scientist challenge
          option(value='carp')
            | Trapper² (initial)
          option(value='trapper')
            | Trapper² (respec)
          option(value='coord')
            | Coordinate²
          option(value='trimp')
            | Trimp²
          option(value='metal')
            | Metal²
          option(value='c2')
            | Other c²
        | Presets
      label(title='How much you value +1% Helium income.')
        input#weight-he(type='text' oninput='check_input(this)' required data-saved='')
        | Weight: Helium
      label(title='How much you value +1% attack.')
        input#weight-atk(type='text' oninput='check_input(this)' required data-saved='')
        | Weight: Attack
      label(title='How much you value +1% survivability (health and block).')
        input#weight-hp(type='text' oninput='check_input(this)' required data-saved='')
        | Weight: Health
      label(title='How much you value +1% Fluffy exp gain.')
        input#weight-xp(type='text' oninput='check_input(this)' required data-saved='')
        | Weight: Fluffy
      label(title='A list of perks that you don’t want to change, for example “power=42, carp=31”')
        input#fixed(type='text' oninput='validate_fixed()' data-saved='')
        | Fixed perks
      .tabs
        label(for='advanced') Toggle manual input
        input#advanced(type='checkbox' data-saved='')
        label(title='Total Helium Earned, as displayed on the Stats screen')
          input#helium(type='text' required oninput='check_input(this)')
          | Total Helium
        label(title='Number of trimps generated by your DG (before carpentry)')
          input#dg(type='text' value='0' oninput='check_input(this)')
          | DG housing
        label(title='A comma-separated list of perks you have unlocked')
          input#unlocks(type='text' value='Agility,Bait,Trumps,Pheromones,Packrat,Motivation,Power,Toughness,Looting')
          | Unlocked perks
        label(title='Uncheck this if you didn’t unlock the Whipimp')
          input#whipimp(type='checkbox' checked='')
          | Whipimp
        label(title='Uncheck this if you didn’t unlock the Magnimp')
          input#magnimp(type='checkbox' checked='')
          | Magnimp
        label(title='Uncheck this if you didn’t unlock the Tauntimp')
          input#tauntimp(type='checkbox' checked='')
          | Tauntimp
        label(title='Uncheck this if you didn’t unlock the Venimp')
          input#venimp(type='checkbox' checked='')
          | Venimp
        label(title='Seconds of income per 100 cells cleared. This includes Chronoimp, Jestimp, and caches.')
          input#chronojest(type='text' value='42' pattern='\\d+')
          | Chronojest mod
        label(title='Multiplier for production')
          input#prod(type='text' oninput='check_input(this)' value='1')
          | Production mod
        label(title='Multiplier for regular loot')
          input#loot(type='text' oninput='check_input(this)' value='1')
          | Loot mod
        label(title='Your usual breed timer')
          input#breed-timer(type='text' value='30' pattern='\\d+')
          | Breed timer
      button.centered(type='submit') Optimize!
    .filler
    .filler

    #results(style='opacity: 0; flex: 2 0 640px; margin: 0 auto; white-space: nowrap')
      #details.flexbox
        h2#he-left
        button#info(type='button' onclick='toggle_info()')
        button(type='button' onclick='create_share()') Share
      #perks.flexbox
      textarea#perkstring(style='width: 100%' onfocus='this.select()')
    .filler

  #test-text(style='display: inline-block; visibility: hidden; height: 0')
